<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TikTok Downloader</title>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5298191242036107"
     crossorigin="anonymous"></script>
  <style>
    /* Reset ve temel ayarlar */
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #181a1f;
      color: #ddd;
      margin: 0;
      padding: 20px 15px 60px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    h1 {
      font-size: 2.8rem;
      margin-bottom: 20px;
      text-align: center;
      color: #4f8ef7;
      font-weight: 900;
      user-select: none;
      text-shadow: 0 2px 6px rgba(79,142,247,0.6);
    }
    form#mainForm {
      display: flex;
      width: 100%;
      max-width: 600px;
      gap: 12px;
      margin-bottom: 40px;
      position: relative;
    }
    input[type="text"] {
      flex: 1;
      padding: 18px 22px;
      font-size: 1.3rem;
      border-radius: 14px;
      border: 2px solid #2c2f36;
      outline: none;
      background-color: #252931;
      color: #eee;
      transition: border-color 0.3s, box-shadow 0.3s;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.4);
    }
    input[type="text"]::placeholder {
      color: #7a7f8c;
      font-weight: 500;
    }
    input[type="text"]:focus {
      border-color: #4f8ef7;
      box-shadow: 0 0 8px #4f8ef7aa;
      background-color: #2f333d;
    }
    button {
      padding: 16px 28px;
      font-size: 1.25rem;
      border-radius: 14px;
      border: none;
      cursor: pointer;
      font-weight: 700;
      transition: background-color 0.3s, box-shadow 0.3s;
      user-select: none;
      flex-shrink: 0;
      box-shadow: 0 3px 6px rgba(0,0,0,0.25);
    }
    button:hover {
      filter: brightness(1.1);
      box-shadow: 0 6px 12px rgba(79,142,247,0.8);
    }
    button:active {
      filter: brightness(0.9);
      box-shadow: inset 0 3px 6px rgba(0,0,0,0.4);
    }
    button.paste-btn {
      background-color: #4b4f5a;
      color: #ccc;
      order: 2; /* Sağda */
      box-shadow: inset 0 2px 6px #3a3d45;
    }
    button.paste-btn:hover {
      background-color: #5f6490;
      color: #fff;
      box-shadow: 0 4px 10px #5f6490aa;
    }
    button.clear-btn {
      background-color: #d9534f;
      color: #fff;
      order: 1;
      display: none;
      box-shadow: 0 4px 10px #c9302ccc;
    }
    button.clear-btn:hover {
      background-color: #e74c3c;
      box-shadow: 0 6px 12px #e74c3ccc;
    }
    button.fetch-btn {
      background-color: #4f8ef7;
      color: #fff;
      box-shadow: 0 0 18px #4f8ef7bb;
      order: 3;
      font-weight: 800;
      letter-spacing: 0.03em;
    }
    button.fetch-btn:hover {
      background-color: #3a6ee8;
      box-shadow: 0 0 28px #3a6ee8cc;
    }

    #options {
      flex-direction: column;
      gap: 18px;
      width: 100%;
      max-width: 600px;
      margin-bottom: 50px;
      align-items: center;
      display: none;
    }
    .download-btn {
      background-color: #3159a5;
      color: #b0c4f7;
      font-weight: 700;
      font-size: 1.35rem;
      padding: 18px 26px;
      border-radius: 18px;
      border: none;
      cursor: pointer;
      box-shadow: 0 0 15px #4f8ef7a0;
      transition: background-color 0.3s, box-shadow 0.3s, transform 0.15s ease;
      user-select: none;
      width: 100%;
      max-width: 320px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .download-btn:hover {
      background-color: #4f8ef7;
      color: #fff;
      box-shadow: 0 0 28px #4f8ef7dd;
      transform: translateY(-3px);
    }
    .download-btn:active {
      transform: translateY(1px);
      box-shadow: inset 0 2px 8px #3a6ee8aa;
    }

    #preview-container {
      max-width: 600px;
      margin-bottom: 50px;
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 14px;
      border-radius: 18px;
      background: #2a2e3b;
      padding: 18px 20px;
      box-shadow: 0 8px 20px rgba(20,30,50,0.7);
      transition: background-color 0.3s ease;
      user-select: none;
    }
    #preview-container img {
      width: 100%;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.75);
      user-select: none;
      pointer-events: none;
    }
    #preview-container h2 {
      color: #4f8ef7;
      text-align: center;
      margin: 0 0 10px;
      user-select: text;
      font-weight: 700;
      font-size: 1.4rem;
      text-shadow: 0 1px 3px rgba(79,142,247,0.7);
    }

    .accordion {
      width: 100%;
      max-width: 600px;
      background-color: #313743;
      border-radius: 18px;
      box-shadow: 0 8px 24px rgb(0 0 0 / 0.7);
      overflow: hidden;
      user-select: none;
      margin-bottom: 70px;
      font-weight: 600;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .accordion-item {
      border-bottom: 1px solid #4f5690;
    }
    .accordion-item:last-child {
      border-bottom: none;
    }
    .accordion-header {
      background-color: #3a3f57;
      cursor: pointer;
      padding: 22px 28px;
      font-weight: 700;
      font-size: 1.25rem;
      color: #4f8ef7;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background-color 0.3s;
      user-select: none;
      border-left: 6px solid transparent;
    }
    .accordion-header:hover {
      background-color: #4f8ef7;
      color: #f0f6ff;
      border-left-color: #f0f6ff;
      text-shadow: 0 0 5px rgba(240,246,255,0.8);
    }
    .accordion-header.active {
      background-color: #4f8ef7;
      color: #f0f6ff;
      border-left-color: #f0f6ff;
      text-shadow: 0 0 8px rgba(240,246,255,1);
    }
    .accordion-content {
      max-height: 0;
      overflow: hidden;
      background-color: #232732;
      color: #cfd3e2;
      padding: 0 28px;
      font-size: 1rem;
      transition: max-height 0.4s ease, padding 0.4s ease;
      user-select: text;
      line-height: 1.7;
    }
    .accordion-content.open {
      padding: 18px 28px 22px;
      max-height: 800px;
    }
    .accordion-content p {
      margin: 0;
      font-weight: 400;
    }
    .accordion-header::after {
      content: "▶";
      font-size: 1.1rem;
      transition: transform 0.3s;
      color: #a5b4fc;
      user-select: none;
    }
    .accordion-header.active::after {
      transform: rotate(90deg);
      color: #f0f6ff;
    }

    #about {
      max-width: 600px;
      margin: 0 auto 60px;
      color: #bbb;
      font-size: 1.15rem;
      line-height: 1.85;
      text-align: left;
      user-select: text;
      font-weight: 500;
    }
    #about h2 {
      color: #4f8ef7;
      font-weight: 800;
      margin-bottom: 20px;
      font-size: 2rem;
      text-shadow: 0 0 10px rgba(79,142,247,0.8);
    }
    #about p {
      margin-bottom: 34px;
    }

    footer {
      max-width: 600px;
      color: #666;
      font-size: 0.95rem;
      text-align: center;
      margin: 30px auto 15px;
      user-select: none;
      font-weight: 400;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    footer a {
      color: #4f8ef7;
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s ease;
    }
    footer a:hover {
      color: #75a7ff;
      text-decoration: underline;
    }

    .discord-redirect-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin: 40px auto;
      padding: 14px 22px;
      border-radius: 14px;
      font-weight: 700;
      font-size: 1.1rem;
      text-decoration: none;
      background-color: #5865F2;
      color: white;
      box-shadow: 0 6px 12px rgba(88, 101, 242, 0.6);
      transition: all 0.3s ease;
    }
    .discord-redirect-btn:hover {
      background-color: #4752C4;
      box-shadow: 0 8px 18px rgba(71, 82, 196, 0.8);
      transform: translateY(-2px);
    }
    .discord-redirect-btn:active {
      background-color: #3a3f90;
      box-shadow: inset 0 3px 8px rgba(0,0,0,0.3);
      transform: translateY(1px);
    }
    .discord-icon {
      width: 26px;
      height: 26px;
      fill: currentColor;
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 2.2rem;
      }
      input[type="text"], button, .download-btn, .accordion-header {
        font-size: 1.15rem;
        padding: 14px 18px;
      }
      #options {
        max-width: 100%;
      }
      form#mainForm {
        flex-direction: column;
      }
      button.paste-btn, button.clear-btn {
        order: 2;
        width: 100%;
        margin-top: 10px;
      }
      button.fetch-btn {
        order: 3;
        width: 100%;
        margin-top: 10px;
      }
      button {
        width: 100%;
        margin-top: 10px;
      }
      #about {
        font-size: 1rem;
        line-height: 1.5;
        padding: 0 15px;
      }
      .accordion {
        max-width: 100%;
      }
      #preview-container {
        max-width: 100%;
        padding: 14px;
      }
      .download-btn {
        max-width: 100%;
      }
    }
  </style>
</head>
<body>
  <h1>TikTok Downloader</h1>

  <form id="mainForm" onsubmit="return false;">
    <input
      type="text"
      id="videoUrl"
      placeholder="Paste TikTok video link here..."
      autocomplete="off"
      required
      value="<%= videoData?.sourceUrl || '' %>"
    />
    <button type="button" class="clear-btn" onclick="clearInput()">Clear</button>
    <button type="button" class="paste-btn" onclick="pasteLink()">Paste</button>
    <button type="button" class="fetch-btn" onclick="fetchLinks()">Download</button>
  </form>

  <div
    id="preview-container"
    style="<%= videoData ? 'display:flex;' : 'display:none;' %>"
  >
    <img
      id="preview-thumbnail"
      src="<%= videoData?.cover || '' %>"
      alt="Video thumbnail"
    />
    <h2 id="preview-title"><%= videoData?.title || '' %></h2>

    <% if (videoData?.hdplay || videoData?.play) { %>
      <video
        controls
        preload="metadata"
        poster="<%= videoData?.cover || '' %>"
        style="width: 100%; max-width: 600px; border-radius: 16px; margin-top: 15px;"
      >
        <source src="<%= videoData?.hdplay || videoData?.play %>" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
    <% } %>
  </div>

  <div
    id="options"
    style="<%= videoData ? 'display:flex; flex-direction: column; align-items:center; gap:16px;' : 'display:none;' %>"
  >
    <% if (videoData?.music) { %>
      <a
        class="download-btn"
        href="/proxy-download?url=<%= encodeURIComponent(videoData.music) %>&username=<%= encodeURIComponent(videoData.username) %>&type=music"
        >🎵 MP3 (Audio Only)</a
      >
    <% } %>
    <% if (videoData?.play) { %>
      <a
        class="download-btn"
        href="/proxy-download?url=<%= encodeURIComponent(videoData.play) %>&username=<%= encodeURIComponent(videoData.username) %>&type=play"
        >📽️ SD Video (Normal Quality)</a
      >
    <% } %>
    <% if (videoData?.hdplay) { %>
      <a
        class="download-btn"
        href="/proxy-download?url=<%= encodeURIComponent(videoData.hdplay) %>&username=<%= encodeURIComponent(videoData.username) %>&type=hdplay"
        >📽️ HD Video (High Quality)</a
      >
    <% } %>
  </div>

  <section id="about" aria-label="About TikTok Downloader">
    <h2>Unlimited TikTok Downloads</h2>
    <p>
      Download TikTok videos as much as you want without any limits — totally free and easy to use. Our downloader lets you save your favorite videos anytime,
      anywhere.
    </p>

    <h2>No Watermarks</h2>
    <p>
      Save TikTok videos in MP4 format without any watermarks or TikTok logos — clean videos ready for sharing or personal use.
    </p>

    <h2>MP4 and MP3 Formats</h2>
    <p>
      Choose to download videos in high-quality MP4 or convert to MP3 audio. Whether you want the video or just the sound, our tool makes it easy.
    </p>

    <h2>How to Download TikTok Videos</h2>
    <p>
      Simply paste the TikTok video link above, click “Download”, and then choose your preferred format and quality to download instantly. No registration or software
      needed.
    </p>
  </section>

  <section class="accordion" aria-label="Frequently Asked Questions">
    <div class="accordion-item">
      <div class="accordion-header" tabindex="0">
        What is Tikssave.com?
      </div>
      <div class="accordion-content">
        <p>
          Tikssave.com is a free online service that lets you download TikTok videos in MP4 format with no watermark. No signups, no software, just paste your link and
          save.
        </p>
      </div>
    </div>
    <div class="accordion-item">
      <div class="accordion-header" tabindex="0">
        Is it free?
      </div>
      <div class="accordion-content">
        <p>
          Yes, downloading TikTok videos using Tikssave.com is completely free and unlimited. You can download as many videos as you want.
        </p>
      </div>
    </div>
    <div class="accordion-item">
      <div class="accordion-header" tabindex="0">How to download videos?</div>
      <div class="accordion-content">
        <p>
          Paste the TikTok video link into the input field and click Download. Then select the desired video quality or audio format to start downloading.
        </p>
      </div>
    </div>
    <div class="accordion-item">
      <div class="accordion-header" tabindex="0">
        Why can't I download HD videos sometimes?
      </div>
      <div class="accordion-content">
        <p>
          HD videos depend on availability from TikTok's servers and video uploader settings. If HD is not available, only SD video download option will show.
        </p>
      </div>
    </div>
    <div class="accordion-item">
      <div class="accordion-header" tabindex="0">
        Can I download TikTok videos without watermark?
      </div>
      <div class="accordion-content">
        <p>Yes, Tikssave.com removes TikTok watermark from downloaded videos automatically.</p>
      </div>
    </div>
    <div class="accordion-item">
      <div class="accordion-header" tabindex="0">Is there any software to install?</div>
      <div class="accordion-content">
        <p>No software or apps needed. This is an online downloader, works on any device with internet and a browser.</p>
      </div>
    </div>
  </section>

  <a
    href="/discord"
    class="discord-redirect-btn"
    aria-label="Tikssave Bot on Discord"
    target="_blank"
    rel="noopener noreferrer"
  >
    <svg
      class="discord-icon"
      viewBox="0 0 245 240"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
    >
      <path
        fill="currentColor"
        d="M104.4 104.6c-5.7 0-10.3 5-10.3 11.1 0 6.1 4.6 11.1 10.3 11.1 5.7 0 10.3-5 10.3-11.1 0-6.1-4.6-11.1-10.3-11.1zm36.2 0c-5.7 0-10.3 5-10.3 11.1 0 6.1 4.6 11.1 10.3 11.1 5.7 0 10.3-5 10.3-11.1 0-6.1-4.6-11.1-10.3-11.1zM213.5 24H31.2C14.1 24 0 38 0 55.4v130.3c0 17.4 14.1 31.4 31.2 31.4h150.2l-7.1-24.7 16.7 15.6 14.1 13.1 25-23.4V55.4c0-17.4-14.1-31.4-31.4-31.4zM178 168.4s-6.7-7.9-12.3-15c24.5-7.3 33.8-23.3 33.8-23.3-7.6 5-14.8 8.6-21.3 11-9.3 4-18.2 6.6-27 8-11.7 1.9-22.9 1.4-32.4-0.1-7.1-1.1-14-2.7-20.7-5.1-0.9-0.3-1.7-0.5-2.6-0.8-0.6-0.2-1-0.4-1.5-0.6-0.3-0.1-0.4-0.2-0.6-0.3-0.2-0.1-0.3-0.2-0.4-0.3-0.9-0.4-1.4-0.7-1.4-0.7s9 15.5 32.5 22.8c-5.5 7-12.4 15.4-12.4 15.4-41.1-1.3-56.7-28.2-56.7-28.2 0-59.6 26.7-107.9 26.7-107.9 26.7-20 52-19.5 52-19.5l1.8 2.1c-33.4 9.6-48.8 24.1-48.8 24.1s4.1-2.3 11-5.5c19.9-8.7 35.6-11 42-11.6 1-0.2 1.9-0.3 2.7-0.3 9.4-1.4 20-1.8 31.3-0.1 8.4 1.2 17.4 3.6 26.7 8.1 0 0-14.5 27.3-56.6 28.7z"
      />
    </svg>
    Tikssave Bot on Discord
  </a>

  <footer>
    <p>
      © 2025 tikssave.com All rights reserved. |
      <a href="/terms">Terms of Service</a> |
      <a href="/privacy">Privacy Policy</a> |
      <a href="/rights">Rights</a>
    </p>
  </footer>

  <script>
    // Accordion aç/kapa
    const accordionHeaders = document.querySelectorAll('.accordion-header');
    accordionHeaders.forEach(header => {
      header.addEventListener('click', () => {
        const content = header.nextElementSibling;
        const isOpen = content.classList.contains('open');

        // Diğerlerini kapat
        document.querySelectorAll('.accordion-content.open').forEach(openContent => {
          if (openContent !== content) {
            openContent.classList.remove('open');
            openContent.previousElementSibling.classList.remove('active');
          }
        });

        if (!isOpen) {
          content.classList.add('open');
          header.classList.add('active');
        } else {
          content.classList.remove('open');
          header.classList.remove('active');
        }
      });

      // Klavyeden enter ve boşluk ile aç/kapa
      header.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          header.click();
        }
      });
    });

    const videoUrlInput = document.getElementById('videoUrl');
    const clearBtn = document.querySelector('.clear-btn');

    // Clear buton görünürlüğü
    function toggleClearBtn() {
      if (videoUrlInput.value.trim().length > 0) {
        clearBtn.style.display = 'inline-block';
      } else {
        clearBtn.style.display = 'none';
      }
    }
    videoUrlInput.addEventListener('input', toggleClearBtn);
    toggleClearBtn();

    function clearInput() {
      videoUrlInput.value = '';
      toggleClearBtn();
      videoUrlInput.focus();
    }

    async function pasteLink() {
      try {
        const text = await navigator.clipboard.readText();
        videoUrlInput.value = text;
        toggleClearBtn();
      } catch (e) {
        alert('Clipboard access denied or unavailable.');
      }
    }

    // Basit fetch isteği (burada form submit event handler yerine bu kullanılır)
    async function fetchLinks() {
      const url = videoUrlInput.value.trim();
      if (!url) return alert('Please enter a TikTok video link.');

      // Sayfayı yenile, backend tarafından işlenir
      window.location.href = '/?url=' + encodeURIComponent(url);
    }
  </script>
</body>
</html>
